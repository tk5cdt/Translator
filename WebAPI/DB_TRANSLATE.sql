use master 
go
alter database DB_TRANSLATE set single_user with rollback immediate

drop database DB_TRANSLATE
go
CREATE DATABASE DB_TRANSLATE
GO
USE DB_TRANSLATE
GO

---------------CREATE TABLE---------------
CREATE TABLE ACCOUNT
(
	UID INT NOT NULL IDENTITY,
	USERNAME NVARCHAR(50),
	EMAIL VARCHAR(50) NOT NULL UNIQUE,
	PASS VARCHAR(60) NOT NULL,
	CONSTRAINT PK_ACCOUNT PRIMARY KEY(UID)
)
GO

CREATE TABLE HISTORY
(
	WORDID VARCHAR(10) NOT NULL,
	ORIGINALWORD TEXT,
	TRANSLATEDWORD TEXT,
	FROMLANGUAGE VARCHAR(20),
	TOLANGUAGE VARCHAR(20),
	UID INT,
	CONSTRAINT PK_HISTORY PRIMARY KEY(WORDID)
)
GO

CREATE TABLE FAVORITE
(
	WORDID VARCHAR(10) NOT NULL,
	ORIGINALWORD TEXT,
	TRANSLATEDWORD TEXT,
	FROMLANGUAGE VARCHAR(20),
	TOLANGUAGE VARCHAR(20),
	UID INT,
	CONSTRAINT PK_FAVORITE PRIMARY KEY(WORDID)
)
GO

---------------FOREIGN KEY----------
ALTER TABLE FAVORITE ADD CONSTRAINT FK_ACCOUNT_FAVORITE FOREIGN KEY (UID) REFERENCES ACCOUNT(UID)
GO
ALTER TABLE HISTORY ADD CONSTRAINT FK_ACCOUNT_HISTORY FOREIGN KEY (UID) REFERENCES ACCOUNT(UID)
GO

---------Stored Procedure----------
CREATE PROCEDURE AddAccount
    @Username NVARCHAR(50),
    @Email VARCHAR(50),
    @Password VARCHAR(50)
AS
BEGIN
    INSERT INTO ACCOUNT (USERNAME, EMAIL, PASS)
    VALUES (@Username, @Email, @Password);
END
GO

--------------INSERT------------
EXEC AddAccount @Username = 'thanhtruc', @Email = 'thanhtruc@gmail.com', @Password = 'truc0307';
EXEC AddAccount @Username = 'ductruong', @Email = 'ductruong@gmail.com', @Password = 'truong0807';
EXEC AddAccount @Username = 'baongan', @Email = 'baongan@gmail.com', @Password = 'ngan0402';


--USE MASTER
--GO
--DROP DATABASE DB_TRANSLATE
--GO